version: '3.3'

networks:
  default:
    driver: bridge

services:

  http:
    build:
      context: .docker/python
      dockerfile: ./Dockerfile
      args:
      - FOLDER=http
    container_name: http
    ports:
      - '8000:8000'
    volumes: 
      - ./http:/usr/src/app
    networks:
      - default

  crawler:
    build: 
      context: .docker/python
      dockerfile: ./Dockerfile
      args:
      - FOLDER=crawler
    container_name: crawler
    volumes: 
      - ./crawler:/usr/src/app
    networks:
      - default

  parser:
    build: 
      context: .docker/python
      dockerfile: ./Dockerfile
      args:
      - FOLDER=parser
    container_name: parser
    volumes: 
      - ./parser:/usr/src/app
    networks:
      - default

  front:
    image: nginx
    container_name: front
    restart: 'no'
    ports:
      - '80:80'
    volumes:
      - .docker/nginx:/etc/nginx/conf.d
      - ./front/build:/var/www
    networks:
      - default
  
